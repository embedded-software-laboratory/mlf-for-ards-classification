# Information about the process itself - defines which steps are executed by the framework
process:
  # Information for time-series models
  load_models: false
  load_timeseries_data: false
  perform_anomaly_detection: false
  perform_imputation: false
  perform_unit_conversion: false
  calculate_missing_params: false
  perform_ards_onset_detection: false
  perform_filtering: false
  perform_feature_selection: false
  perform_data_segregation: false
  perform_timeseries_training: false
  perform_timeseries_classification: false
  perform_threshold_optimization: false
  calculate_evaluation_metrics: false
  perform_cross_validation: false
  save_models: false
  # Information for image models
  load_image_data: true
  train_image_models: true
  execute_image_models: true
  test_image_models: true

# Current supported algorithms by the framework 
supported_algorithms:
  timeseries_models:
  - AdaBoostModel
  - LightGBMModel
  - LogisticRegressionModel
  - RandomForestModel
  # - SupportVectorMachineModel
  - XGBoostModel
  image_models:
  - ResNetModel
  - DenseNetModel
  - VITModel

# Configurations about the models to train, execute, cross-validate
models:
  timeseries_models:
    base_path_config:
      to_cross_validate: Data/Models/TimeSeriesModels/Config/CrossValidation/
      to_train: Data/Models/TimeSeriesModels/Config/Training/
    to_train:
      AdaBoost:
        Active: false
        Configs: []
        Names: []
      LightGBM:
        Active: false
        Configs: []
        Names: []
      LogisticRegression:
        Active: false
        Configs: []
        Names: []
      RandomForest:
        Active: false
        Configs: []
        Names: []
      SupportVectorMachine:
        Active: false
        Configs: []
        Names: []
      XGBoost:
        Active: false
        Configs: []
        Names: []
    to_cross_validate:
      AdaBoost:
        Active: false
        Configs: []
        Names: []
      LightGBM:
        Active: false
        Configs: []
        Names: []
      LogisticRegression:
        Active: false
        Configs: []
        Names: []
      RandomForest:
        Active: false
        Configs: []
        Names: []
      SupportVectorMachine:
        Active: false
        Configs: []
        Names: []
      XGBoost:
        Active: false
        Configs: []
        Names: []
    to_evaluate:
      AdaBoost:
        Active: false
        Names: []
      LightGBM:
        Active: false
        Names: []
      LogisticRegression:
        Active: false
        Names: []
      RandomForest:
        Active: false
        Names: []
      SupportVectorMachine:
        Active: false
        Names: []
      XGBoost:
        Active: false
        Names: []
    to_execute:
      AdaBoost:
        Active: false
        Names: []
      LightGBM:
        Active: false
        Names: []
      LogisticRegression:
        Active: false
        Names: []
      RandomForest:
        Active: false
        Names: []
      SupportVectorMachine:
        Active: false
        Names: []
      XGBoost:
        Active: false
        Names: []
  image_models:
    base_path_config:
      to_cross_validate: Data/Models/ImageModels/Config/CrossValidation/
      to_train: Data/Models/ImageModels/Config/Training/
    to_train:
      ResNet:
        Active: true
        Configs:
        - default
        Names:
        - ResNet
      DenseNet:
        Active: true
        Configs:
        - default
        Names:
        - DenseNet
      ViT:
        Active: true
        Configs:
        - default
        Names:
        - ViT
    to_evaluate:
      ResNet:
        Active: true
        Names:
        - ResNet
      DenseNet:
        Active: true
        Names:
        - DenseNet
      ViT:
        Active: true
        Names:
        - ViT
    to_execute:
      ResNet:
        Active: true
        Names:
        - ResNet
      DenseNet:
        Active: true
        Names:
        - DenseNet
      ViT:
        Active: true
        Names:
        - ViT
    to_cross_validate:
      ResNet:
        Active: false
        Configs: []
        Names: []
      DenseNet:
        Active: false
        Configs: []
        Names: []
      ViT:
        Active: false
        Configs: []
        Names: []

image_model_parameters:
  # defines the method for fine-tuning for the dl models
  # Options: last_layer, last_block, model
  method: last_block
  
  # Data augmentation modes (controls which datasets use augmented data)
  # mode1: No augmentation - standard training with original images
  # mode2: Reserved for future use (augmentation during training only via transforms)
  # mode3: ARDS training data uses pre-augmented dataset (MIMIC-DB-AUG folder)
  # mode4: ARDS training AND test data use pre-augmented datasets
  # Note: PNEUMONIA training always uses non-augmented data (CheXpert-DB-PNEUMONIA)
  mode: mode4
  
  # Augmentation techniques to use when augmentation is enabled (mode3 or mode4)
  # Options:
  #   - 'all': Use all available augmentation techniques (colorinvert, jitter, emboss, fog, gamma)
  #   - list: Use specific techniques, e.g., ['colorinvert'] or ['jitter', 'emboss']
  # Available techniques: colorinvert, jitter, emboss, fog, gamma
  augmentation_techniques: 'all'  # Uses all augmentation techniques combined
  
  # =========================
  # CNN Models (ResNet, DenseNet)
  # =========================
  # Pretraining parameters
  learning_rate_pre_cnn: 0.001
  batch_size_pre_cnn: 64
  weight_decay_pre_cnn: 0.00001
  
  # Main training parameters
  learning_rate_cnn: 0.05
  epoch_decay_cnn: 0.002 
  weight_decay_cnn: 0.00001
  margin_cnn: 1.0
  
  # Pneumonia pretraining stage
  num_epochs_pneumonia: 20
  batch_size_pneumonia: 128
  SEED_pneumonia: 47
  
  # ARDS fine-tuning stage
  num_epochs_ards: 30
  batch_size_ards: 8
  SEED_ards: 11
  
  # Cross-validation
  k_folds: 5  # Use 1 for simple 80/20 split (faster), 2+ for k-fold cross-validation
  
  # =========================
  # ViT Models (Vision Transformer)
  # =========================
  learning_rate_vit: 0.0005
  batch_size_vit: 32
  k_folds_vit: 5

# Path to the algorithms if they need to be loaded for execution
algorithm_base_path:
  # Timeseries models
  AdaBoost: default
  LightGBM: default
  LogisticRegression: default
  RandomForest: default
  RecurrentNeuralNetwork: Save/Cross validation results/Recurrent neural network_1
  SupportVectorMachine: default
  XGBoost: default
  # Image models
  DensetNet: default
  ResNet: default
  VIT: default

# Path to store or load the results of the experiments
storage_path: ../Save/ImageModels/Augmentation_Mode4/

# Information about the data that is used to train and evaluate the models
data:
  # image dataset information
  database: CALIBRATION
  pneumonia_image_dataset: balanced
  ards_image_dataset: weighted
  # Subfolder for augmented datasets ('weighted' or 'unweighted')
  augmentation_subfolder: weighted
  timeseries_file_path: /work/rwth1474/Data/time_series/Calibration/Base50
  import_type: split
  image_file_path: /work/rwth1474/Data/image/

# Settings for preprocessing the data before training or classification
# Includes anomaly detection, filtering, imputation, calculation of additional parameters and ARDS onset detection
preprocessing:
  patients_per_process: 5000
  max_processes: 4

  anomaly_detection:
    ALAD:
      active: false
    DeepAnt:
      active: false
    Physiological_Outliers:
      active: false
    SW_ABSAD_MOD:
      active: false

  filtering:
    filter:
    - BD
    - Strict

  imputation:
    default_imputation_method: forward
    impute_empty_cells: true
    params_to_impute:
    - ards, forward
    - all

  params_to_calculate:
  - horovitz

  ards_onset_detection:
    detection_rule: first_horovitz
    impute_missing_rows: false
    remove_ards_patients_without_onset: false
    return_rule: datapoint
    series_end_point: 50000
    series_start_point: -50000
    update_ards_values: false

# Settings for feature selection before training or classification
feature_selection:
  method: univariate
  variance: 0.16
  k: 50
  neighbor: 5 # neighbor parameter for relief algorithm (default is 5)
  
# Settings about how the data is split into training and test data
data_segregation:
  training_test_ratio: 0.8
  percentage_of_ards_patients: 0.15
  splitting_seed: 1

# Configurations about the evaluation of the models and which metrics to calculate
evaluation:
  cross_validation:
    n_splits: 5
    random_state: 11
    shuffle: true
  evaluation_metrics:
  - AUC
  - Accuracy
  - F1Score
  - FPR
  - MCC
  - OptimalProbability
  - Sensitivity
  - Specificity
  - TPR
  - PPV
  - NPV
  - Precisions
  - Recalls
  evaluation_name: ImageModels_Mode4_TrainTestAugmented
  threshold_optimization_algorithms:
  - Standard
  - MaxTPR
  - MaxTPRMinFPR
  - GeometricRoot
